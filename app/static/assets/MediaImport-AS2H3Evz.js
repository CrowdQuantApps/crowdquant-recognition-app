import{a as j}from"./button.esm-x3PWloDL.js";import{o as c,c as m,m as g,a as h,B as te,R as ie,f as R,r as se,b as F,g as x,w as $,i as b,d as re,e as T,A as ae,T as ne,H as le,I as oe,J as ue,G as de,F as k,j as z,h as E,t as L,k as ce,s as pe,u as fe}from"./index-DtLmOhiI.js";import{s as N,a as me}from"./index.esm-D8y4E80j.js";import{s as U}from"./basecomponent.esm-CrbkcW-f.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";var O={name:"CheckIcon",extends:j},ge=h("path",{d:"M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z",fill:"currentColor"},null,-1),ve=[ge];function ye(e,t,i,n,d,s){return c(),m("svg",g({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),ve,16)}O.render=ye;var B={name:"ExclamationTriangleIcon",extends:j},Ce=h("path",{d:"M13.4018 13.1893H0.598161C0.49329 13.189 0.390283 13.1615 0.299143 13.1097C0.208003 13.0578 0.131826 12.9832 0.0780112 12.8932C0.0268539 12.8015 0 12.6982 0 12.5931C0 12.4881 0.0268539 12.3848 0.0780112 12.293L6.47985 1.08982C6.53679 1.00399 6.61408 0.933574 6.70484 0.884867C6.7956 0.836159 6.897 0.810669 7 0.810669C7.103 0.810669 7.2044 0.836159 7.29516 0.884867C7.38592 0.933574 7.46321 1.00399 7.52015 1.08982L13.922 12.293C13.9731 12.3848 14 12.4881 14 12.5931C14 12.6982 13.9731 12.8015 13.922 12.8932C13.8682 12.9832 13.792 13.0578 13.7009 13.1097C13.6097 13.1615 13.5067 13.189 13.4018 13.1893ZM1.63046 11.989H12.3695L7 2.59425L1.63046 11.989Z",fill:"currentColor"},null,-1),Fe=h("path",{d:"M6.99996 8.78801C6.84143 8.78594 6.68997 8.72204 6.57787 8.60993C6.46576 8.49782 6.40186 8.34637 6.39979 8.18784V5.38703C6.39979 5.22786 6.46302 5.0752 6.57557 4.96265C6.68813 4.85009 6.84078 4.78686 6.99996 4.78686C7.15914 4.78686 7.31179 4.85009 7.42435 4.96265C7.5369 5.0752 7.60013 5.22786 7.60013 5.38703V8.18784C7.59806 8.34637 7.53416 8.49782 7.42205 8.60993C7.30995 8.72204 7.15849 8.78594 6.99996 8.78801Z",fill:"currentColor"},null,-1),be=h("path",{d:"M6.99996 11.1887C6.84143 11.1866 6.68997 11.1227 6.57787 11.0106C6.46576 10.8985 6.40186 10.7471 6.39979 10.5885V10.1884C6.39979 10.0292 6.46302 9.87658 6.57557 9.76403C6.68813 9.65147 6.84078 9.58824 6.99996 9.58824C7.15914 9.58824 7.31179 9.65147 7.42435 9.76403C7.5369 9.87658 7.60013 10.0292 7.60013 10.1884V10.5885C7.59806 10.7471 7.53416 10.8985 7.42205 11.0106C7.30995 11.1227 7.15849 11.1866 6.99996 11.1887Z",fill:"currentColor"},null,-1),we=[Ce,Fe,be];function Te(e,t,i,n,d,s){return c(),m("svg",g({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),we,16)}B.render=Te;var P={name:"InfoCircleIcon",extends:j},De=h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.11101 12.8203C4.26215 13.5895 5.61553 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.61553 13.5895 4.26215 12.8203 3.11101C12.0511 1.95987 10.9579 1.06266 9.67879 0.532846C8.3997 0.00303296 6.99224 -0.13559 5.63437 0.134506C4.2765 0.404603 3.02922 1.07129 2.05026 2.05026C1.07129 3.02922 0.404603 4.2765 0.134506 5.63437C-0.13559 6.99224 0.00303296 8.3997 0.532846 9.67879C1.06266 10.9579 1.95987 12.0511 3.11101 12.8203ZM3.75918 2.14976C4.71846 1.50879 5.84628 1.16667 7 1.16667C8.5471 1.16667 10.0308 1.78125 11.1248 2.87521C12.2188 3.96918 12.8333 5.45291 12.8333 7C12.8333 8.15373 12.4912 9.28154 11.8502 10.2408C11.2093 11.2001 10.2982 11.9478 9.23232 12.3893C8.16642 12.8308 6.99353 12.9463 5.86198 12.7212C4.73042 12.4962 3.69102 11.9406 2.87521 11.1248C2.05941 10.309 1.50384 9.26958 1.27876 8.13803C1.05367 7.00647 1.16919 5.83358 1.61071 4.76768C2.05222 3.70178 2.79989 2.79074 3.75918 2.14976ZM7.00002 4.8611C6.84594 4.85908 6.69873 4.79698 6.58977 4.68801C6.48081 4.57905 6.4187 4.43185 6.41669 4.27776V3.88888C6.41669 3.73417 6.47815 3.58579 6.58754 3.4764C6.69694 3.367 6.84531 3.30554 7.00002 3.30554C7.15473 3.30554 7.3031 3.367 7.4125 3.4764C7.52189 3.58579 7.58335 3.73417 7.58335 3.88888V4.27776C7.58134 4.43185 7.51923 4.57905 7.41027 4.68801C7.30131 4.79698 7.1541 4.85908 7.00002 4.8611ZM7.00002 10.6945C6.84594 10.6925 6.69873 10.6304 6.58977 10.5214C6.48081 10.4124 6.4187 10.2652 6.41669 10.1111V6.22225C6.41669 6.06754 6.47815 5.91917 6.58754 5.80977C6.69694 5.70037 6.84531 5.63892 7.00002 5.63892C7.15473 5.63892 7.3031 5.70037 7.4125 5.80977C7.52189 5.91917 7.58335 6.06754 7.58335 6.22225V10.1111C7.58134 10.2652 7.51923 10.4124 7.41027 10.5214C7.30131 10.6304 7.1541 10.6925 7.00002 10.6945Z",fill:"currentColor"},null,-1),Ie=[De];function Se(e,t,i,n,d,s){return c(),m("svg",g({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),Ie,16)}P.render=Se;var _e={root:function(t){var i=t.props;return"p-message p-component p-message-"+i.severity},wrapper:"p-message-wrapper",icon:"p-message-icon",text:"p-message-text",closeButton:"p-message-close p-link",closeIcon:"p-message-close-icon"},Me=te.extend({name:"message",classes:_e}),ke={name:"BaseMessage",extends:U,props:{severity:{type:String,default:"info"},closable:{type:Boolean,default:!0},sticky:{type:Boolean,default:!0},life:{type:Number,default:3e3},icon:{type:String,default:void 0},closeIcon:{type:String,default:void 0},closeButtonProps:{type:null,default:null}},style:Me,provide:function(){return{$parentInstance:this}}},Z={name:"Message",extends:ke,inheritAttrs:!1,emits:["close","life-end"],timeout:null,data:function(){return{visible:!0}},watch:{sticky:function(t){t||this.closeAfterDelay()}},mounted:function(){this.sticky||this.closeAfterDelay()},methods:{close:function(t){this.visible=!1,this.$emit("close",t)},closeAfterDelay:function(){var t=this;setTimeout(function(){t.visible=!1,t.$emit("life-end")},this.life)}},computed:{iconComponent:function(){return{info:P,success:O,warn:B,error:N}[this.severity]},closeAriaLabel:function(){return this.$primevue.config.locale.aria?this.$primevue.config.locale.aria.close:void 0}},directives:{ripple:ie},components:{TimesIcon:me,InfoCircleIcon:P,CheckIcon:O,ExclamationTriangleIcon:B,TimesCircleIcon:N}};function D(e){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(e)}function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,n)}return i}function C(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?V(Object(i),!0).forEach(function(n){Ee(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function Ee(e,t,i){return t=Le(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Le(e){var t=Re(e,"string");return D(t)=="symbol"?t:String(t)}function Re(e,t){if(D(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var n=i.call(e,t||"default");if(D(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xe=["aria-label"];function Oe(e,t,i,n,d,s){var f=R("TimesIcon"),y=se("ripple");return c(),F(ne,g({name:"p-message",appear:""},e.ptmi("transition")),{default:x(function(){return[$(h("div",g({class:e.cx("root"),role:"alert","aria-live":"assertive","aria-atomic":"true"},e.ptm("root")),[e.$slots.container?b(e.$slots,"container",{key:0,onClose:s.close,closeCallback:s.close}):(c(),m("div",g({key:1,class:e.cx("wrapper")},e.ptm("wrapper")),[b(e.$slots,"messageicon",{class:"p-message-icon"},function(){return[(c(),F(re(e.icon?"span":s.iconComponent),g({class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16,["class"]))]}),h("div",g({class:["p-message-text",e.cx("text")]},e.ptm("text")),[b(e.$slots,"default")],16),e.closable?$((c(),m("button",g({key:0,class:e.cx("closeButton"),"aria-label":s.closeAriaLabel,type:"button",onClick:t[0]||(t[0]=function(l){return s.close(l)})},C(C(C({},e.closeButtonProps),e.ptm("button")),e.ptm("closeButton"))),[b(e.$slots,"closeicon",{},function(){return[e.closeIcon?(c(),m("i",g({key:0,class:[e.cx("closeIcon"),e.closeIcon]},C(C({},e.ptm("buttonIcon")),e.ptm("closeIcon"))),null,16)):(c(),F(f,g({key:1,class:[e.cx("closeIcon"),e.closeIcon]},C(C({},e.ptm("buttonIcon")),e.ptm("closeIcon"))),null,16,["class"]))]})],16,xe)),[[y]]):T("",!0)],16))],16),[[ae,d.visible]])]}),_:3},16)}Z.render=Oe;const Be={name:"BaseMediaImport",extends:U,props:{name:{type:String,default:null},url:{type:String,default:"/api/upload"},multiple:{type:Boolean,default:!1},mediaType:{type:String,default:"*",validate:e=>{const t=["image","video","all","*"].includes(e);return t||console.warn("Invalid mediaType. MediaType only accept: image, video, all, *."),t}},accept:{type:String,default:""},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},uploadFailedMessage:{type:String,default:"{0}: An error occurred while sending the file. (Error {1} - {2})"},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},customUpload:{type:Boolean,default:!1},chooseLabel:{type:String,default:null},removeLabel:{type:String,default:null},chooseIcon:{type:String,default:void 0},removeIcon:{type:String,default:void 0},style:null,class:null},style:null,provide(){return{$parentInstance:this}}};var q={exports:{}};(function(e,t){(function(i,n){e.exports=n()})(le,function(){var i=624,n=397,d=2147483647;function s(o){return o>>>0}function f(o){return o>>0}function y(o){return o&2147483648}function l(o){return o&1}function w(o){return o&2147483647}function S(o,u){return y(o)|w(u)}function J(o,u,r){return s(s(o)^S(u,r)>>>1^s(-f(l(r)))&2567483615)}function G(o,u,r){return s(s(o)^S(u,r)>>>1^s(-f(l(u)))&2567483615)}function K(){return Math.random()*Math.pow(2,32)>>>0}function W(o,u,r,a){return u+(r-u+1)*(o/(a+1))>>>0}function _(o,u){return o&&console.warn("unexpected: "+u),o}var X=function(){function o(u,r){for(var a=0;a<r.length;a++){var p=r[a];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(u,p.key,p)}}return function(u,r,a){return r&&o(u.prototype,r),a&&o(u,a),u}}();function Y(o,u){if(!(o instanceof u))throw new TypeError("Cannot call a class as a function")}var M=function(){function o(){Y(this,o),this.state_=[],this.left_=0,this.next_=0,this.mt_rand_is_seeded_=!1}return X(o,[{key:"mtInitialize_",value:function(r){var a=0,p=0,v=1;r=s(r);var I=this.state_;for(I[a++]=r&4294967295;v<i;++v){var A=I[p]^I[p]>>>30,Q=A&65535,ee=(A&4294901760)>>>16;I[a++]=s(1812433253*Q+s(1812433253*ee<<16)+v),p++}}},{key:"mtReload_",value:function(){var r=this.state_,a=0,p=void 0,v=void 0;switch(this.mode_){case o.MODE_MT_RAND_PHP:v=G;break;default:case o.MODE_MT_RAND_19937:v=J;break}for(p=i-n;p--;++a)r[a]=v(r[a+n],r[a],r[a+1]);for(p=n;--p;++a)r[a]=v(r[a+n-i],r[a],r[a+1]);r[a]=v(r[a+n-i],r[a],r[0]),this.left_=i,this.next_=0}},{key:"mtSRand_",value:function(r,a){this.mode_=a,this.mtInitialize_(r),this.mtReload_(),this.mt_rand_is_seeded_=!0}},{key:"mtRand_",value:function(){this.mt_rand_is_seeded_||this.srand(),this.left_===0&&this.mtReload_(),--this.left_;var r=this.state_[this.next_++];return r^=r>>>11,r^=r<<7&2636928640,r^=r<<15&4022730752,r^=r>>>18,s(r)}},{key:"randRange32_",value:function(r){r=s(r);var a=this.mtRand_();if(_(r===4294967295,"max is 0xffffffff"))return a;if(r++,!(r&r-1))return a&r-1;for(var p=s(4294967295-4294967295%r-1);a>p;)a=this.mtRand_();return a%r}},{key:"randRange64_",value:function(r){console.error("bit operators in javascript does not support 64 bit integer yet.",this)}},{key:"mtRandRange_",value:function(r,a){var p=a-r;return _(p>4294967295,"umax > 0xffffffff")?this.randRange64_(p):r+this.randRange32_(p)}},{key:"mtRandCommon",value:function(r,a){switch(this.mode_){case o.MODE_MT_RAND_PHP:var p=this.mtRand_()>>>1;return W(p,r,a,o.getrandmax());default:case o.MODE_MT_RAND_19937:return this.mtRandRange_(r,a)}}},{key:"srand",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K(),a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.MODE_MT_RAND_19937;this.mtSRand_(r,a)}},{key:"rand",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o.getrandmax();return arguments.length===0?this.mtRand_()>>>1:_(a<r)?(console.error("JSMTRand.rand(min, max): expected min <= max."),null):this.mtRandCommon(r,a)}}],[{key:"getrandmax",value:function(){return d}}]),o}();return M.MODE_MT_RAND_19937=0,M.MODE_MT_RAND_PHP=1,M})})(q);var Pe=q.exports;const je=oe(Pe),Ae=function(e,t){return new je().rand(e,t)},$e=function(e){let t="";for(let i=0;i<e;i++)t+=Ae(0,9);return t},ze={name:"MediaImport",extends:Be,inheritAttrs:!1,emits:["select","before-upload","progress","error","clear","remove","has-files","media-object-url","media-filename","upload","uploader","has-uploaded","before-send"],data(){return{duplicateIEEvent:!1,files:[],uploadedFiles:[],messages:[],focused:!1,progress:null,acceptedTypes:"",showDragOverIcon:!1,uploadedFileCount:0}},methods:{onFileSelect(e){if(e.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.messages=[],this.files=this.files||[];let t=null;if(e instanceof DragEvent)t=e.dataTransfer?e.dataTransfer.files:null;else if(e instanceof Event){const i=e.target;t=i?i.files:null}if(t)for(let i=0;i<t.length;i++){const n=t[i];this.isFileSelected(n)||this.validate(n)&&((this.isImage(n)||this.isVideo(n))&&(n.objectURL=window.URL.createObjectURL(n),this.$emit("media-object-url",n.objectURL)),this.files.push(n),this.$emit("has-files",!0))}this.$emit("select",{originalEvent:e,files:this.files}),this.fileLimit&&this.checkFileLimit(),e.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()},upload(){if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files}),this.clear();else{let e=new XMLHttpRequest,t=new FormData;this.$emit("before-upload",{xhr:e,formData:t});for(let i of this.files){const d=this.generateUniqueFileName(i);if(i.size>=83886080){let s=0,f=60*1024*1024;for(;s<i.size;){let y=i.slice(s,s+f);t.append(`${this.name}[]`,y,`${d}.part${Math.ceil((s+1)/f)}`),s+=f}}else t.append(this.name,i,d);this.$emit("media-filename",d)}e.upload.addEventListener("progress",i=>{i.lengthComputable&&(this.progress=Math.round(i.loaded*100/i.total)),this.$emit("progress",{originalEvent:i,progress:this.progress})}),e.onreadystatechange=()=>{if(e.readyState===4){if(this.progress=0,e.status>=200&&e.status<300)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("upload",{xhr:e,files:this.files});else{for(let i of this.files)return this.messages.push(this.uploadFailedMessage.replace("{0}",i.name).replace("{1}",`${e.status}`).replace("{2}",e.statusText)),!1;this.$emit("error",{xhr:e,files:this.files})}this.uploadedFiles.push(...this.files),this.clear()}},e.open("POST",this.url,!0),this.$emit("before-send",{xhr:e,formData:t}),e.withCredentials=this.withCredentials,e.send(t)}this.$emit("has-uploaded",!0)},choose(){this.$refs.fileInput.click()},clear(){this.files=[],this.messages=[],this.$emit("clear"),this.$emit("has-files",!1)},onFocus(){this.focused=!0},onBlur(){this.focused=!1},isFileSelected(e){if(this.files&&this.files.length)for(let t=0;t<this.files.length;t++){const i=this.files[t];if(i.name+i.type+i.size===e.name+e.type+e.size)return!0}return!1},isIE11(){return!!(window.MSInputMethodContext&&document.documentMode)},validate(e){return this.accept&&!this.isFileTypeValid(e)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",e.name).replace("{1}",this.accept)),!1):this.maxFileSize&&e.size>this.maxFileSize?(this.messages.push(this.invalidFileSizeMessage.replace("{0}",e.name).replace("{1}",this.formatSize(this.maxFileSize))),!1):!0},isFileTypeValid(e){let t=this.accept.split(",").map(i=>i.trim());for(let i of t)if(this.isWildcard(i)?this.getTypeClass(e.type)===this.getTypeClass(i):e.type==i||this.getFileExtension(e).toLowerCase()===i.toLowerCase())return!0;return!1},getTypeClass(e){return e.substring(0,e.indexOf("/"))},isWildcard(e){return e.indexOf("*")!==-1},getFileExtension(e){return"."+e.name.split(".").pop()},isImage(e){return/^image\//.test(e.type)},isVideo(e){return/^video\//.test(e.type)},generateUniqueFileName(e){return`${this.isImage(e)?"image":"video"}-${$e(18)+this.getFileExtension(e)}`},onDragEnter(e){this.disabled||(e.stopPropagation(),e.preventDefault())},onDragOver(e){if(!this.disabled&&(e.stopPropagation(),e.preventDefault(),e.currentTarget.id==="media-upload")){e.currentTarget.style.border="3px dashed #1683ff",e.currentTarget.style.filter="brightness(1.1)";const t=e.currentTarget.querySelector(".media-icon");t&&(this.showDragOverIcon=!0,t.setAttribute("style","color: #1683ff"));const i=e.currentTarget.querySelectorAll(".media-text");i.length>1&&i[1].setAttribute("style","display: none")}},onDragLeave(e){if(!this.disabled&&(e.stopPropagation(),e.preventDefault(),e.currentTarget.id==="media-upload")){e.currentTarget.removeAttribute("style");const t=e.currentTarget.querySelector(".media-icon");t&&(this.showDragOverIcon=!1,t.removeAttribute("style"));const i=e.currentTarget.querySelectorAll(".media-text");i.length>1&&i[1].removeAttribute("style")}},onDrop(e){if(!this.disabled){e.stopPropagation(),e.preventDefault();const t=e.dataTransfer?e.dataTransfer.files:e.target?e.target.files:null;(this.multiple||t&&t.length===1)&&(this.showDragOverIcon=!1,this.onFileSelect(e))}},remove(e){this.clearInputElement();let t=this.files.splice(e,1)[0];this.files=[...this.files],this.$emit("remove",{file:t,files:this.files}),this.$emit("has-files",!1)},clearInputElement(){this.$refs.fileInput.value=""},clearIEInput(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize(e){var f;const n=((f=this.$primevue.config.locale)==null?void 0:f.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e===0)return`0 ${n[0]}`;const d=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,d)).toFixed(3))} ${n[d]}`},isFileLimitExceeded(){return this.fileLimit&&this.fileLimit<=this.files.length&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length},checkFileLimit(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose(){this.messages=[]},getMediaTypeSupported(){const e=this.mediaType.toLowerCase();return e==="image"?this.acceptedTypes=this.accept?this.accept.split(",").filter(t=>!t.includes("video")).join(", "):"image/jpeg, image/jpg, image/png":e==="video"?this.acceptedTypes=this.accept?this.accept.split(",").filter(t=>!t.includes("image")).join(", "):"video/mp4, video/webm, video/avi":this.acceptedTypes=this.accept||"image/jpeg, image/jpg, image/png, video/mp4, video/webm, video/avi"},getAllSupportedMediaTypes(){const e=["jpeg","jpg","png","gif","svg"],t=["mp4","webm","avi","mov","mkv"];return(this.acceptedTypes.includes("image/*")?e:this.acceptedTypes.includes("video/*")?t:[...e,...t]).map(n=>n.toUpperCase())}},computed:{hasFiles(){return!!(this.files&&this.files.length>0)},hasUploadedFiles(){return!!(this.uploadedFiles&&this.uploadedFiles.length>0)},chooseDisabled(){return this.disabled||!!(this.fileLimit&&this.fileLimit<=this.files.length)},uploadDisabled(){return this.disabled||!this.hasFiles||!!(this.fileLimit&&this.fileLimit<this.files.length)},cancelDisabled(){return this.disabled||!this.hasFiles},hasContentInsideTemplateOrEmpty(){return this.$slots.default&&this.$slots.default().length>0?this.$slots.default().every(e=>e.type==="template"||e.type===ue):!0},supportedFileTypes(){const e={"svg+xml":"svg","x-matroska":"mkv",quicktime:"mov"};return[...new Set(this.acceptedTypes.split(",").map(t=>{const i=t.trim().split("/")[1];return i.includes("*")?this.getAllSupportedMediaTypes().join(", "):(e[i]||i).toUpperCase()}))].join(", ")}},components:{ErrorMessage:Z,FontAwesomeIcon:de}},H=e=>(pe("data-v-a13c4fdc"),e=e(),fe(),e),Ne={class:"content-media","data-pc-name":"fileupload"},Ve={class:"error-message"},Ue=["multiple","accept","disabled"],Ze=["onClick"],qe=["src"],He=["src"],Je=H(()=>h("div",{class:"media-overlay"},null,-1)),Ge={key:1,class:"media-preview"},Ke={key:0,class:"media-icon"},We={key:1,class:"media-icon"},Xe=H(()=>h("span",{class:"media-text"},"Drag & Drop",-1)),Ye={class:"media-text"},Qe={class:"media-supported"};function et(e,t,i,n,d,s){const f=R("FontAwesomeIcon"),y=R("ErrorMessage");return c(),m("div",Ne,[(c(!0),m(k,null,z(d.messages,(l,w)=>(c(),F(y,{key:w,severity:"error",class:"error",onClose:s.onMessageClose},{messageicon:x(()=>[E(f,{alt:"Error Icon",icon:["fas","triangle-exclamation"],size:"lg",class:"error-icon"})]),default:x(()=>[h("span",Ve,L(l),1)]),_:2},1032,["onClose"]))),128)),h("input",{ref:"fileInput",type:"file",onChange:t[0]||(t[0]=(...l)=>s.onFileSelect&&s.onFileSelect(...l)),multiple:e.multiple,accept:s.getMediaTypeSupported(),disabled:s.chooseDisabled,hidden:""},null,40,Ue),s.hasContentInsideTemplateOrEmpty?(c(),m(k,{key:0},[!e.$slots.preview&&s.hasFiles?(c(!0),m(k,{key:0},z(d.files,(l,w)=>(c(),m("div",{key:l.name+l.type+l.size,ref_for:!0,ref:"content",class:"media-preview"},[h("div",{class:"media-remove",onClick:S=>s.remove(w)},[E(f,{alt:e.removeLabel||"Remove Image",icon:["fas","fa-trash"]},null,8,["alt"])],8,Ze),e.mediaType==="image"||d.acceptedTypes.includes("image")?(c(),m("img",{key:0,class:"preview-image",src:l.objectURL,alt:"Preview",role:"presentation"},null,8,qe)):e.mediaType==="video"||d.acceptedTypes.includes("video")?(c(),m("video",{key:1,class:"preview-video",src:l.objectURL,alt:"Preview",role:"presentation"},null,8,He)):T("",!0),Je]))),128)):e.$slots.preview&&s.hasFiles?(c(),m("div",Ge,[b(e.$slots,"preview",{ref:"content",files:d.files,removeFileCallback:s.remove,messages:d.messages},void 0,!0)])):T("",!0),!e.$slots.select&&!s.hasFiles?(c(),m("div",{key:2,ref:"content",id:"media-upload",class:"media-upload",onDragenter:t[2]||(t[2]=(...l)=>s.onDragEnter&&s.onDragEnter(...l)),onDragover:t[3]||(t[3]=(...l)=>s.onDragOver&&s.onDragOver(...l)),onDragleave:t[4]||(t[4]=(...l)=>s.onDragLeave&&s.onDragLeave(...l)),onDrop:t[5]||(t[5]=(...l)=>s.onDrop&&s.onDrop(...l))},[d.showDragOverIcon?(c(),m("div",We,[E(f,{alt:"Import File",icon:["fas","fa-file-import"]})])):(c(),m("div",Ke,[e.mediaType==="*"||d.acceptedTypes.includes("image")&&d.acceptedTypes.includes("video")?(c(),F(f,{key:0,alt:"Select Media",icon:["fas","fa-photo-film"]})):e.mediaType==="image"||d.acceptedTypes.includes("image")?(c(),F(f,{key:1,alt:"Select Image",icon:["fas","fa-images"]})):e.mediaType==="video"||d.acceptedTypes.includes("video")?(c(),F(f,{key:2,alt:"Select Video",icon:["fas","fa-film"]})):T("",!0)])),Xe,h("span",Ye,[ce("or"),h("button",{class:"btn btn-upload",onClick:t[1]||(t[1]=(...l)=>s.choose&&s.choose(...l))},L(e.chooseLabel||"Browse"),1)]),h("span",Qe,"Supports: "+L(s.supportedFileTypes),1)],544)):e.$slots.select&&!s.hasFiles?(c(),m("div",{key:3,ref:"content",id:"media-upload",class:"media-upload",onDragenter:t[6]||(t[6]=(...l)=>s.onDragEnter&&s.onDragEnter(...l)),onDragover:t[7]||(t[7]=(...l)=>s.onDragOver&&s.onDragOver(...l)),onDragleave:t[8]||(t[8]=(...l)=>s.onDragLeave&&s.onDragLeave(...l)),onDrop:t[9]||(t[9]=(...l)=>s.onDrop&&s.onDrop(...l))},[b(e.$slots,"select",{chooseCallback:s.choose},void 0,!0)],544)):T("",!0)],64)):b(e.$slots,"default",{key:1,ref:"content",chooseCallback:s.choose,removeFileCallback:s.remove,files:d.files,messages:d.messages,onDragenter:t[10]||(t[10]=(...l)=>s.onDragEnter&&s.onDragEnter(...l)),onDragover:t[11]||(t[11]=(...l)=>s.onDragOver&&s.onDragOver(...l)),onDragleave:t[12]||(t[12]=(...l)=>s.onDragLeave&&s.onDragLeave(...l)),onDrop:t[13]||(t[13]=(...l)=>s.onDrop&&s.onDrop(...l))},void 0,!0)])}const nt=he(ze,[["render",et],["__scopeId","data-v-a13c4fdc"]]);export{nt as M};
